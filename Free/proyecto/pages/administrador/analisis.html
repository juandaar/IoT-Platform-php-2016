<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8">  <!-- unicode lenguaje español-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Proyecto_Final </title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/AdminLTE.min.css">
  <!-- estilo-->
    <link rel="stylesheet" href="../../dist/css/skins/skin-green-light.min.css">
  <!-- iCheck -->
    <link rel="stylesheet" href="../../plugins/iCheck/square/green.css">
<!--tabla -->
	   <!-- DataTables -->
    <link rel="stylesheet" href="../../plugins/datatables/dataTables.bootstrap.css">
	 
	  
	   <!-- Select2 -->
    <link rel="stylesheet" href="../../plugins/select2/select2.min.css">
	  <!--ocultar selector de archivos-->
	    <link rel="stylesheet" href="../../dist/css/archivo.css">
  </head>

  <body class="hold-transition skin-green-light sidebar-mini">
    <div class="wrapper">

      <!-- Main Header -->
      <header class="main-header">

        <!-- Logo -->
        <a  class="logo">
     
          <span class="logo-mini"><b>P</b>F</span>
          <span class="logo-lg"><b>Proyecto</b>FINAL</span>
          
        </a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" role="navigation">
           <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
           </a>
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
    <li class="dropdown user user-menu">
                <!-- Menu Toggle Button -->
  
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">

                  <span class="hidden-xs"><i class="fa fa-user"></i>Usuario</span>
                </a>
                <ul class="dropdown-menu">
                     <li><a  class="btn btn-default btn-flat" href="../register.html" style="background-color:#00a65a;color: white;"><b>Registro</b></a></li>
                      <li><a class="btn btn-default btn-flat"  href="../login.html"style="background-color:#00a65a;color: white;"><b>Iniciar sesión</b><br> </a></li>
                </ul>
              </li>
           </ul>
          </div>
        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

          <!-- Sidebar user panel (optional) -->
          <div class="user-panel">
            <div class="pull-left image">
              <img src="../../dist/img/escudo2.jpg  " alt="User Image">
            </div>
            <div class="pull-left info">
              <p>proyecto Udea <br> GITA</p>
            </div>
          </div>


          <!-- Sidebar Menu -->
               <ul class="sidebar-menu">
		   	<li class="treview">
              <a href="#"><i class=" fa fa-file-pdf-o"></i> <span>Información</span> </a>
              <ul class="treeview-menu">
            	     <li class="treview"><a href="#"></a></li>
                     <li class="treview"><a href="../../index.html"><i class="fa fa-circle-o"></i>General</a></li>
                     <li class="treview"><a href="#"><i class="fa fa-circle-o"></i>Sensores</a></li>
					<li class="treview"> <a href="../basico/analisis.html"><i class="fa fa-circle-o"></i>Análisis</a></li>
             </ul>
            </li>
			<li class="treeview">
              <a href="#"><i class=" fa fa-file-pdf-o"></i> <span>ProyectoUdea</span> </a>
              <ul class="treeview-menu">
            	     <li class="treview"><a href="#"></a></li>
                     <li class="treview"><a href="proyecto.html"><i class="fa fa-circle-o"></i>¿Que es?</a></li>
                     <li class="treview"><a href="basico/proyecto.html"><i class="fa fa-circle-o"></i>Guias</a></li>
					<li class="treview"> <a href="basico/proyecto.html"><i class="fa fa-circle-o"></i>Agradecimientos</a></li>
             </ul>
            </li>
            <li class="treview"><a href="#"><i class="fa fa-dashboard"></i> <span>Dashboard</span></a>
			
				<ul class="treeview-menu">
			    <li class="treeview"><a href="dashboard.html"><i class="fa fa-book"></i>General</a></li>
                <li class="treeview"><a href="sensores/dashboard.html"><i class="fa  fa-book "></i>Sensores</a></li>
                </ul>
			  
			  
			 </li>
			  
			  			  
			 <!-- requiere permisos avanzados dados por el administrador de la pagina -->
			 <li class="active"> <a href="#"><i class="fa fa-star-o"></i> <span>Creación</span> </a>
              <ul class="treeview-menu">

                     <li class="treview"><a href="../avanzado/sensores.html"><i class="fa  fa-flash"></i>Sensores</a></li>
                     <li class="treview"><a href="../avanzado/dispositivoshtml"><i class="fa fa-flash"></i>Dispositivos</a></li>
				     <li class="active">  <a href="#"><i class="fa fa-cloud"></i>Analisís de Datos</a>
				         <ul class="treeview-menu">
					         <li class="treview"><a href="../avanzado/analisis.html"><i class="fa fa-book"></i>Explicación</a></li>
                             <li class="active"><a href="#"><i class="fa fa-cloud"></i>Ingresar Algoritmo</a></li>
					
                         </ul>
	                 </li>
              </ul>
			<!--requiere permisops de administracion-->
			 <li class="treeview">
               <a href="#"><i class="fa fa-star-o"></i> <span>Administración</span> </a>
              <ul class="treeview-menu">
                    <li class="treview"><a href="../administrador/sensores.html"><i class="fa  fa-flash"></i>Sensores</a></li>
                    <li class="treview"><a href="../administrador/dispositivos.html"><i class="fa fa-flash"></i>Dispositivos</a></li>
				    <li class="treview"><a href="../administrador/datos.html"><i class="fa fa-book"></i>Datos</a></li>
				    <li class="treview"><a href="../administrador/usuarios.html"><i class="fa fa-book"></i>Usuarios</a></li>
         
              </ul>				  
		    
				  
		     <!-- finalizado-->
            
		

          </ul><!-- /.sidebar-menu -->
		
		
        </section>
        <!-- /.sidebar -->
      </aside>
   
		
      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <h1>
           <b>Análisis</b>. 
          </h1>

		
          <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-book"></i>Información</a></li>
			<li><a href="#">Análisis</a></li>
          </ol>
         </section>

        <!-- Main content -->
        <section class="content">
	
	<div class="row">
		      <div class="col-md-15">
			  <div class="box box-success" >
               <div class="box-header with-border">
               <h3 class="box-title">Ingreso de nuevos algoritmos de análisis</h3>
               </div> <!--box box-header-->
               <div class="box-body chart-responsive">
				   
			<form class="form-horizontal">
                  
                      <div class="form-group">
                      <label class="col-sm-2 control-label">Nombre del análisis</label>
                      <div class="col-sm-8">
                        <input type="descripción" class="form-control" id="nombre" placeholder="Nombre del método de análisis">
                      </div>
				     </div>

           </form>
		   <form class="form-horizontal">
                  
                      <div class="form-group">
                      <label class="col-sm-2 control-label">Archivo (*.py)</label>
                      <div class="col-sm-8">
                        <input type="descripción" class="form-control" id="analisis_python" placeholder="Archivo python con el algoritmo del metodo" onclick="algoritmo()" readonly >
						 
						 <form id="file-algoritmo" enctype="multipart/form-data">
							  <input id="archivo_algoritmo"  type="file" onchange="cambio_algoritmo()"/>
							  
						  </form>
					
						  			 <form id="file-pdf" enctype="multipart/form-data">
							 <input id="archivo_explicacion"  type="file" onchange="cambio_pdf()"/>
						  </form>
					


                      </div>
				     </div>

           </form>
		   <form class="form-horizontal">
                  
                      <div class="form-group">
                      <label  class="col-sm-2 control-label">Descripción (*.pdf)</label>
                      <div class="col-sm-8">
                       <input type="descripción" class="form-control" id="analisis_pdf" placeholder="Archivo con la información del método" onclick="explicacion()" readonly>
				
                      </div>
		               </div>

           </form>
		 
	                <form class="form-horizontal">
					 <div class="form-group">
                    
				     <label class="col-sm-2 control-label">Análisis</label>
                      <div class="col-sm-8">
                    <select  class="form-control select2"  data-placeholder="Ninguno"  style="width: 100%;" id="analisis"  onchange="modificar()">
                     
                    </select>
						 </div>
                  </div><!-- /.form-group -->
					   </form>
		  <label class="col-sm-4	"></label>

				   <div class=" col-sm-2 centered"  style="clear: none;" >
		       <input type="submit" class=" btn btn-block  btn-success " id="creacion" value="Crear"   onclick="cambio()" />
				  </div>
             
                  </div>   
		
				   
             	   

		
                    <table id="tabla_datos" class="table table-bordered table-hover">
				    <thead>
                      <tr>
					   <th>Nombre</th>
                        <th>Archivo</th>
                        <th>Descripción</th>

                      </tr>
                    </thead>
					</table>
					   
				
				   
                
               </div><!-- /.box-body -->
			
		</div>
			

			
		</div>
			
		  </section>

      </div>
      <!-- Main Footer -->
      <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
         <center> <strong><a href="https://sites.google.com/site/grupotelecoudea/" target="_blank">Grupo de Investigación   en Telecomunicaciones Aplicadas <br> GITA </a></strong> </center>
        </div>
        <!-- Default to the left -->
 <div class="pull-left image">
              <img src="../../dist/img/escudo.jpg" alt="Smiley face" height="50" width="43">
  </div>
<strong><a  href="http://www.udea.edu.co/wps/portal/udea/web/inicio/!ut/p/z1/04_Sj9CPykssy0xPLMnMz0vMAfIjo8ziLSydjQwdTQx8LAws3AwcA0N8XE1CfQ0M_E31wwkpiAJKG-AAjgZA_VFgJXATDLwNTYEmuAb4hfg7B7h4GUEV4DGjIDfCINNRUREATA0gew!!/dz/d5/L2dBISEvZ0FBIS9nQSEh/"target="_blank">Universidad de Antioquia</a><br>&emsp;Medellin-Antioquia<br></strong>

      </footer>

    </div><!-- ./wrapper -->
	     <!-- jQuery 2.1.4 -->
    <script src="../../plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="../../bootstrap/js/bootstrap.min.js"></script>

    <!-- FastClick -->
    <script src="../../plugins/fastclick/fastclick.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/app.min.js"></script>
   <!-- page script -->
	<script src="../../plugins/select2/i18n/es.js"></script>
    <script src="../../plugins/select2/select2.full.min.js"></script>

  <script>

	  
    $(function () {		
$.fn.select2.defaults.set('language', 'es');
$(".select2").select2();
actualizar();
		  
      });
	  
function actualizar()
	  {
	var analisis_tipo=$.post('../../php/general/analisis/tipo_analisis.php',
function (data)
{
$("#analisis").empty();
var option = document.createElement("option");
   option.text ='Ninguno';
   option.value ='[{"id":"0","tipo":"0","archivo":"0"}]';
   document.getElementById("analisis").appendChild(option); 	 
var resultado=eval(data);
	
var tabla=document.createElement("tbody");
tabla.id="cuerpo_tabla";
document.getElementById("tabla_datos").appendChild(tabla); 
var tama=resultado.length;
var contador=0;
$("#cuerpo_tabla").empty();
for (i = 0; i < resultado.length; i++) {
var option = document.createElement("option");
   option.text = resultado[i]['nombre'];
   option.value ='[{"id":"'+resultado[i]['id']+'","tipo":"'+resultado[i]['Tipo_analisis']+'","archivo":"'+resultado[i]['PDF']+'"}]';

   document.getElementById("analisis").appendChild(option); 
	

tabla=document.createElement("tr");
tabla.id="c"+i+"";
document.getElementById("cuerpo_tabla").appendChild(tabla); 

var contenido=document.createElement("td");

var texto = document.createTextNode(resultado[i]['nombre']);
contenido.appendChild(texto);
document.getElementById("c"+i+"").appendChild(contenido); 	
//Sensor
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[i]['archivo']);
contenido.appendChild(texto);
document.getElementById("c"+i+"").appendChild(contenido); 	
//dispositivo
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[i]['PDF']);
contenido.appendChild(texto);
document.getElementById("c"+i+"").appendChild(contenido); 

}
$("#analisis").select2("val",'[{"id":"0","tipo":"0","archivo":"0"}]');
 });
	  };
	   //uniciar la icheck (esto puede ser util mas adelante por posibilidades de cambio en el codigo);
	/* $('input').iCheck({
          checkboxClass: 'icheckbox_square-green',
          radioClass: 'iradio_square-green',
          increaseArea: '20%' // optional
        });*/

 </script>
<!--seleccionadores de archivos-->
	  	 <script>
		function modificar()
			 {
			var informacion_analisis=$("#analisis").select2("val");
            informacion_analisis=eval(informacion_analisis);
           var analisis=informacion_analisis[0]['id'];
			if(analisis==0)
			{
				document.getElementById("creacion").value='crear';
			}
			else
			{
				document.getElementById("creacion").value='Modificar';
			}
		
			
			 };
		function algoritmo()
		 {
			 $('#archivo_algoritmo').click();
		};
					
		function cambio_algoritmo() 
		{
						  
		     var file = document.getElementById("archivo_algoritmo");
		     document.getElementById("analisis_python").placeholder=file.files[0].name;
		 };
		function explicacion()
		{
		   $('#archivo_explicacion').click();
		};
		 function cambio_pdf() 
	    {				  
		var file = document.getElementById("archivo_explicacion");
		 document.getElementById("analisis_pdf").placeholder=file.files[0].name;
        };
        
	   function cambio()
	  {
var formulario=new FormData();
var nombre=document.getElementById("nombre").value;
formulario.append("NOMBRE",nombre)
var informacion_analisis=$("#analisis").select2("val");
informacion_analisis=eval(informacion_analisis);
var analisis=informacion_analisis[0]['id'];
formulario.append("ANALISIS",analisis)
var tipo_analisis=informacion_analisis[0]['tipo'];
formulario.append("TIPO",tipo_analisis)
var file_algoritmo= $("#archivo_algoritmo").prop("files")[0]; 
formulario.append("PY", file_algoritmo)
var file_pdf = $("#archivo_explicacion").prop("files")[0]; 
formulario.append("PDF", file_pdf)

$.ajax({
                url: "../../php/administrador/analisis/crear_analisis.php",
                dataType: 'text',
                cache: false,
                contentType: false,
                processData: false,
                data:formulario,                       
                type: 'post',
                success: 
	           function(data){
                    alert(data); 
				   actualizar();
                }
     });
};
	   </script>
	
  </body>
</html>
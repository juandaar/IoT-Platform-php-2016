<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->

<!--general-->
<html lang="es">
  <head>
    <meta charset="utf-8">  <!-- unicode lenguaje español-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Proyecto_Final </title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/AdminLTE.min.css">
  <!-- estilo-->
    <link rel="stylesheet" href="../../dist/css/skins/skin-green-light.min.css">
  <!-- iCheck -->
    <link rel="stylesheet" href="../../plugins/iCheck/square/green.css">
<!--tabla -->
	   <!-- DataTables -->
    <link rel="stylesheet" href="../../plugins/datatables/dataTables.bootstrap.css">
   <!-- Select2 -->
    <link rel="stylesheet" href="../../plugins/select2/select2.min.css">
  </head>

  <body class="hold-transition skin-green-light sidebar-mini">
    <div class="wrapper">

      <!-- Main Header -->
      <header class="main-header">

        <!-- Logo -->
        <a  class="logo">
     
          <span class="logo-mini"><b>P</b>F</span>
          <span class="logo-lg"><b>Proyecto</b>FINAL</span>
          
        </a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" role="navigation">
           <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
           </a>
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
    <li class="dropdown user user-menu">
                <!-- Menu Toggle Button -->
  
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">

                  <span class="hidden-xs"><i class="fa fa-user"></i>Usuario</span>
                </a>
                <ul class="dropdown-menu">
                     <li><a  class="btn btn-default btn-flat" href="../register.html" style="background-color:#00a65a;color: white;"><b>Registro</b></a></li>
                      <li><a class="btn btn-default btn-flat"  href="../login.html"style="background-color:#00a65a;color: white;"><b>Iniciar sesión</b><br> </a></li>
                </ul>
              </li>
           </ul>
          </div>
        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

          <!-- Sidebar user panel (optional) -->
          <div class="user-panel">
            <div class="pull-left image">
              <img src="../../dist/img/escudo2.jpg  " alt="User Image">
            </div>
            <div class="pull-left info">
              <p>proyecto Udea <br> GITA</p>
            </div>
          </div>


          <!-- Sidebar Menu -->
               <ul class="sidebar-menu">
	        <li class="treeview"><a href="../../index.html"><i class="fa fa-book"></i><span>Información</span></a></li>
			<li class="treeview">
              <a href="#"><i class=" fa fa-file-pdf-o"></i> <span>ProyectoUdea</span> </a>
              <ul class="treeview-menu">
            	     <li class="treview"><a href="#"></a></li>
                     <li class="treview"><a href="../basico/proyecto.html"><i class="fa fa-circle-o"></i>¿Que es?</a></li>
                     <li class="treview"><a href="../basico/proyecto.html"><i class="fa fa-circle-o"></i>Guias</a></li>
					<li class="treview"> <a href="../basico/proyecto.html"><i class="fa fa-circle-o"></i>Agradecimientos</a></li>
             </ul>
            </li>
            <li class="treview"><a href="#"><i class="fa fa-dashboard"></i> <span>Dashboard</span></a>
			
				<ul class="treeview-menu">
			    <li class="treeview"><a href="../basico/dashboard.html"><i class="fa fa-book"></i>General</a></li>
                <li class="treeview"><a href="../basico/sensores/dashboard.html"><i class="fa  fa-book "></i>Sensores</a></li>
                </ul>
			  
			  
			 </li>
			  
			  			  
			 <!-- requiere permisos avanzados dados por el administrador de la pagina -->
			 <li class="treview"> <a href="#"><i class="fa fa-star-o"></i> <span>Creación</span> </a>
              <ul class="treeview-menu">

                     <li class="treview"><a href="../avanzado/sensores.html"><i class="fa  fa-flash"></i>Sensores</a></li>
                     <li class="treview"><a href="../avanzado/dispositivos.html"><i class="fa fa-flash"></i>Dispositivos</a></li>
				     <li class="treview">
				      <a href="#"><i class="fa fa-cloud"></i>Analisís de Datos</a>
				         <ul class="treeview-menu">
					         <li><a href="../general/informacion_analisis.html"><i class="fa fa-book"></i>Explicación</a></li>
                             <li><a href="../avanzado/analisis/analisis.html"><i class="fa fa-cloud"></i>Ingresar Algoritmo</a></li>
					
                         </ul>
	                 </li>
              </ul>
			<!--requiere permisops de administracion-->
			 <li class="active">
               <a href="#"><i class="fa fa-star-o"></i> <span>Administración</span> </a>
              <ul class="treeview-menu">
                    <li class="treview"><a href="sensores.html"><i class="fa  fa-flash"></i>Sensores</a></li>
                    <li class="active"><a href="#"><i class="fa fa-flash"></i>Dispositivos</a></li>
				    <li class="treview"><a href="datos.html"><i class="fa fa-book"></i>Datos</a></li>
				    <li class="treview"><a href="usuarios.html"><i class="fa fa-book"></i>Usuarios</a></li>
         
              </ul>				  
		    
				  
		     <!-- finalizado-->
            
		

          </ul><!-- /.sidebar-menu -->
		
		
        </section>
        <!-- /.sidebar -->
      </aside>
   
		
      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <h1>
           <b>Dispositivos</b>. 
          </h1>

		
          <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-star"></i>Administración</a></li>
			<li><a href="#">Dispositivos</a></li>
          </ol>
         </section>

        <!-- Main content -->
        <section class="content">
	<div class="row">
		      <div class="col-md-15">
			  <div class="box box-success" >
               <div class="box-header with-border">
               <h3 class="box-title">dispositivos</h3>
               </div>
               <div class="box-body chart-responsive">
				   
			<form class="form-horizontal">
                  
				    <div class="form-group">
					  <label class="col-sm-2 control-label">Dispositivo</label>
						<div class="col-sm-8">
       <select class="form-control select2" data-placeholder="Seleccione el dispositivo"   allowClear: true style="width: 100%;" id="clase_dispositivos"  onchange="estado()">
         
                      </select>
						</div></div>
				
			
                      <div class="form-group">
                      <label for="descripcion_dispositivo" class="col-sm-2 control-label">Dipositivo</label>
                      <div class="col-sm-8">
                        <input type="descripción" class="form-control" id="descripcion_dispositivo" placeholder="Descripción del dispositivo">
                      </div>
				     </div>
			
					<div class="form-group">
                      <label for="clave_dispositivo" class="col-sm-2 control-label">Clave del dispositivo</label>
                      <div class="col-sm-8">
                        <input type="password" class="form-control" id="clave_dispositivo" placeholder="Clave nueva">
                      </div>
                    </div>
					
             
               
                </form>
				<label class="col-sm-4"></label>
				<div class=" col-sm-2 centered"  style="clear: none;" >
		       <input type="submit" class=" btn btn-block  btn-success " id="modificacion" value="Modificar"   onclick="modificar()" />
					</div>
			    <div class=" col-sm-2 centered"  style="clear: none;" >
		       <input type="submit" class=" btn btn-block  btn-success " id="activar" value=""   onclick="activar()" />
					</div>
			
             
                  </div>   
				   
				
				   
                </div>
                </div><!-- /.box-body -->
             
				  
		
              <div class="box box-success" >
                <div class="box-header with-border">
                  <h3 class="box-title">Sensores</h3>
                </div>
                <table id="tabla_datos" class="table table-bordered table-hover">
				    <thead>
                      <tr>
					   <th>ID</th>
                        <th>Sensor</th>
                        <th>Propietario</th>
						<th>Estado</th>
                      </tr>
                    </thead>
					</table>
				  
              </div><!-- /.box -->
			
		</div>
		
			
		  </section>

      </div>
      <!-- Main Footer -->
      <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
         <center> <strong><a href="https://sites.google.com/site/grupotelecoudea/" target="_blank">Grupo de Investigación   en Telecomunicaciones Aplicadas <br> GITA </a></strong> </center>
        </div>
        <!-- Default to the left -->
 <div class="pull-left image">
              <img src="../../dist/img/escudo.jpg" alt="Smiley face" height="50" width="43">
  </div>
<strong><a  href="http://www.udea.edu.co/wps/portal/udea/web/inicio/!ut/p/z1/04_Sj9CPykssy0xPLMnMz0vMAfIjo8ziLSydjQwdTQx8LAws3AwcA0N8XE1CfQ0M_E31wwkpiAJKG-AAjgZA_VFgJXATDLwNTYEmuAb4hfg7B7h4GUEV4DGjIDfCINNRUREATA0gew!!/dz/d5/L2dBISEvZ0FBIS9nQSEh/"target="_blank">Universidad de Antioquia</a><br>&emsp;Medellin-Antioquia<br></strong>

      </footer>

    </div><!-- ./wrapper -->
	     <!-- jQuery 2.1.4 -->
    <script src="../../plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="../../bootstrap/js/bootstrap.min.js"></script>

    <!-- FastClick -->
    <script src="../../plugins/fastclick/fastclick.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/app.min.js"></script>
   <!-- page script -->
	    <!-- Select2 -->
	<script src="../../plugins/select2/i18n/es.js"></script>
    <script src="../../plugins/select2/select2.full.min.js"></script>
  <script>

	  
    $(function () {		
	
 $.fn.select2.defaults.set('language', 'es');
	$(".select2").select2();
//muestra los dispositivos que estan en este momento
var option = document.createElement("option");
   option.text ='Ningun dispositivo';
   option.value ='0';
   document.getElementById("clase_dispositivos").appendChild(option); 
var dispositivos=$.post('../../php/administrador/dispositivos/dispositivos_administrador.php',function (data)
{
var resultado=eval(data);
for (i = 0; i < resultado.length; i++) {
var option = document.createElement("option");
   option.text = resultado[i]['descripcion'];
   option.value =resultado[i]['id'];
   document.getElementById("clase_dispositivos").appendChild(option); 

}
});
	
actualizar_dispositivos();
	
		  
      });
	   //uniciar la icheck (esto puede ser util mas adelante por posibilidades de cambio en el codigo);
	/* $('input').iCheck({
          checkboxClass: 'icheckbox_square-green',
          radioClass: 'iradio_square-green',
          increaseArea: '20%' // optional
        });*/

function actualizar_dispositivos()
		{ 
			
var dispositivos=$.post('../../php/administrador/dispositivos/dispositivos_administrador.php',function (data)
{
var resultado=eval(data);

var tabla=document.createElement("tbody");
tabla.id="cuerpo_tabla";
document.getElementById("tabla_datos").appendChild(tabla); 
$("#cuerpo_tabla").empty();
var tama=resultado.length;
var contador=0;
while(eval(contador)<eval(tama))
{

tabla=document.createElement("tr");
tabla.id="c"+contador+"";
document.getElementById("cuerpo_tabla").appendChild(tabla); 

var contenido=document.createElement("td");

var texto = document.createTextNode(resultado[contador]['id']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 	
//Sensor
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['descripcion']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 	
//dispositivo
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['propietario']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//estado
var contenido=document.createElement("td");
if(resultado[contador]['Activa']=='1')
{
var texto = document.createTextNode('Activo');
}
else
{
var texto = document.createTextNode('Inactivo')
}
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido);
//Tipo

//fin
contador++;
}


}); //sensores tipo, peticion 
		
};	  

 </script>
	 
<!-- script de la funcion creación -->
<script>
function estado()
{
// var informacion_dispositivo=document.getElementById("descripcion_dispositivo").value;
 //var clave =document.getElementById("clave_dispositivo").value;
var ID=$("#clase_dispositivos").select2("val");

var resultado;
if(!ID)
{
}
else
{
var datos=$.post('../../php/administrador/dispositivos/dispositivo_estado.php',{ID:ID},
function (data)
{
data=eval(data);
if(data=="1")
{
document.getElementById("activar").value='Desactivar';
}
if(data=="0")
{
document.getElementById("activar").value='Activar';
}

});
   
}
actualizar_dispositivos();  
};
	

function activar()
{
var ID=$("#clase_dispositivos").select2("val");
var datos=$.post('../../php/administrador/dispositivos/dispositivo_activar.php',{ID:ID},
 function (data)
  {
alert(data);
  
   });

$("#clase_dispositivos").select2("val"," ");
document.getElementById("activar").value=" ";
estado();
}
</script>
	
  </body>
</html>
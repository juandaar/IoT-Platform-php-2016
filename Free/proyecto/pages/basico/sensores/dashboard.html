<!DOCTYPE html>


	  
<html lang="es">
  <head>
    <meta charset="utf-8">  <!-- unicode lenguaje español-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Proyecto_Final </title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="../../../bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../../dist/css/AdminLTE.min.css">
  <!-- estilo-->
    <link rel="stylesheet" href="../../../dist/css/skins/skin-green-light.min.css">
    <!-- daterange picker -->
    <link rel="stylesheet" href="../../../plugins/daterangepicker/daterangepicker-bs3.css">

	   <!-- Select2 -->
    <link rel="stylesheet" href="../../../plugins/select2/select2.min.css">
	  
	  <!--morris-->
	  <link rel="stylesheet" href="../../../plugins/morris/morris.css">
	   <!-- DataTables -->
    <link rel="stylesheet" href="../../../plugins/datatables/dataTables.bootstrap.css">
	  
	 
  </head>

  <body class="hold-transition skin-green-light sidebar-mini">
    <div class="wrapper">

      <!-- Main Header -->
      <header class="main-header">

        <!-- Logo -->
        <a  class="logo">
     
          <span class="logo-mini"><b>P</b>F</span>
          <span class="logo-lg"><b>Proyecto</b>FINAL</span>
          
        </a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" role="navigation">
           <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
           </a>
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
    <li class="dropdown user user-menu">
                <!-- Menu Toggle Button -->
  
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">

                  <span class="hidden-xs"><i class="fa fa-user"></i>Usuario</span>
                </a>
                <ul class="dropdown-menu">
                    <li><a  class="btn btn-default btn-flat" href="../../register.html" style="background-color:#00a65a;color: white;"><b>Registro</b></a></li>
                    <li><a class="btn btn-default btn-flat"  href="../../login.html"style="background-color:#00a65a;color: white;"><b>Iniciar sesión</b><br> </a></li>
                </ul>
              </li>
           </ul>
          </div>
        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

          <!-- Sidebar user panel (optional) -->
          <div class="user-panel">
            <div class="pull-left image">
              <img src="../../../dist/img/escudo2.jpg  " alt="User Image">
            </div>
            <div class="pull-left info">
              <p>proyecto Udea <br> GITA</p>
            </div>
          </div>


          <!-- Sidebar Menu -->
               <ul class="sidebar-menu">
	        <li class="treeview"><a href="../../../index.html"><i class="fa fa-book"></i><span>Información</span></a></li>
			<li class="treeview">
              <a href="#"><i class=" fa fa-file-pdf-o"></i> <span>ProyectoUdea</span> </a>
              <ul class="treeview-menu">
            	     <li class="treview"><a href="#"></a></li>
                     <li class="treview"><a href="../proyecto.html"><i class="fa fa-circle-o"></i>¿Que es?</a></li>
                     <li class="treview"><a href="../proyecto.html"><i class="fa fa-circle-o"></i>Guias</a></li>
					<li class="treview"> <a href="../proyecto.html"><i class="fa fa-circle-o"></i>Agradecimientos</a></li>
             </ul>
            </li>
            <li class="active"><a href="#"><i class="fa fa-dashboard"></i> <span>Dashboard</span></a>
			
				<ul class="treeview-menu">
			    <li class="treeview"><a href="../dashboard.html"><i class="fa fa-book"></i>General</a></li>
                <li class="active"><a href="#"><i class="fa  fa-book "></i>Sensores</a></li>
                </ul>
			  
			  
			 </li>
			  
			  			  
			 <!-- requiere permisos avanzados dados por el administrador de la pagina -->
			 <li class="treeview">
                <a href="#"><i class="fa fa-star-o"></i> <span>Creación</span> </a>
              <ul class="treeview-menu">

                     <li class="treview"><a href="../../avanzado/sensores.html"><i class="fa  fa-flash"></i>Sensores</a></li>
                     <li class="treview"><a href="../../avanzado/dispositivos.html"><i class="fa fa-flash"></i>Dispositivos</a></li>
				     <li class="treview">
				      <a href="#"><i class="fa fa-cloud"></i>Analisís de Datos</a>
				         <ul class="treeview-menu">
					         <li><a href="../informacion_analisis.html"><i class="fa fa-book"></i>Explicación</a></li>
                             <li><a href="../../avanzado/analisis.html"><i class="fa fa-cloud"></i>Ingresar Algoritmo</a></li>
					
                         </ul>
	                 </li>
              </ul>
			<!--requiere permisops de administracion-->
			 <li class="treeview">
               <a href="#"><i class="fa fa-star-o"></i> <span>Administración</span> </a>
              <ul class="treeview-menu">
                    <li class="treview"><a href="../../administrador/sensores.html"><i class="fa  fa-flash"></i>Sensores</a></li>
                    <li class="treview"><a href="../../administrador/dispositivos.html"><i class="fa fa-flash"></i>Dispositivos</a></li>
				    <li class="treview"><a href="../../administrador/datos.html"><i class="fa fa-book"></i>Datos</a></li>
				    <li class="treview"><a href="../../administrador/usuarios.html"><i class="fa fa-book"></i>Usuarios</a></li>
         
              </ul>				  
		    
				  
		     <!-- finalizado-->
            
		

          </ul><!-- /.sidebar-menu -->
		
        </section>
        <!-- /.sidebar -->
      </aside>
   
		
      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <h1>
           <b>Dashboard</b>.

          </h1>

          <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i>Dashboard</a></li>
			  <li><a href="#"><i class="fa  fa-fire"></i>Gas </a></li>
          </ol>
         </section>

        <!-- Main content -->
        <section class="content">

          <div class="row">

            <div class="col-sm-6">
              <div class="box box-success">
                <div class="box-header bg-green-gradient">
                  <h3 class="box-title">Configuración</h3>
                </div>
                <div class="box-body">
                  <!-- Rango fecha -->
                  <div class="form-group">
                    <label>Rango Fechas:</label>
                    <div class="input-group">
                      <div class="input-group-addon">
                        <i class="fa fa-calendar"></i>
                      </div>
						<input type="text" class="form-control pull-right" id="fecha" >
                    </div><!-- /.input group -->
                  </div><!-- /.form group -->

                  <!-- Rango Dias -->
                 <!-- se requiere del plugin select2 -->
                   <div class="form-group">
                    <label>Dias</label>
                    <select  class="form-control select2 " multiple="multiple"  data-placeholder="Todos los dias" style="width: 100%;" id="dias"  >
                      <option value="2">Lunes</option>
                      <option value="3">Martes</option>
                      <option value="4">Miércoles</option>
                      <option value="5">Jueves</option>
                      <option value="6">Viernes</option>
                      <option value="7">Sabado</option>
                      <option value="1">Domingo</option>
                    </select>
                  </div><!-- /.form-group -->

                    <div class="form-group">
                    <label>Tipo sensor</label>
                    <select  class="form-control select2"   data-placeholder="Ninguno" style="width: 100%;" id="clase_sensor" onchange="sensores_del_tipo()"  >

                    </select>
                  </div><!-- /.form-group -->
					
					
					<div class="form-group">
                    <label>Sensores:</label>
                    <select  class="form-control select2" multiple="multiple" data-placeholder="Todos los sensores" style="width: 100%;" id="sensores" >
                    </select>
					
                    </div><!-- /.form-group -->
 
					 <div class="form-group">
                    <label>Análisis</label>
                    <select  class="form-control select2"  data-placeholder="Ninguno"  style="width: 100%;" id="analisis"   >

                    </select>
                  </div><!-- /.form-group -->
					 
					<div class="filter_update" style="clear: none;" >
		<input type="submit" class="btn refresh_ccmbr" id="actualizar" value="actualizar"  style="background-color:#00a65a;color: white; "onclick="actualizar()" />
		<input type="submit" class="pull-right btn refresh_ccmbr" id="datos" value="Descargar"  style="background-color:#00a65a;color: white"; onclick="descargar()" />
					</div>
			
             
                  </div>
		      <!--Sensores a Graficar y analizar -->
					
					
                </div><!-- box-->
       
                </div><!-- /.box-body -->
		     <div class="col-md-6">
		     <!-- consumo -->
              <div class="box box-success">
                <div class="box-header ">
                  <h3 class="box-title">Total</h3>
                </div>
                <div class="box-body chart-responsive">
                  <div class="chart_responsive" id="barras" style="height: 393px;"></div>
                </div><!-- /.box-body -->
              </div><!-- /.box -->

            </div>
			  
			  
			</div>

			 <div class="row">
		      <div class="col-md-15">
              <!-- consumo de agua -->
              <div class="box box-success" >
                <div class="box-header with-border">
                  <h3 class="box-title">GRAFICA 1</h3>
                </div>
                <div class="box-body chart-responsive">
                  <div class="chart" id="consumo_total" style="height: 400px;"></div>
                </div><!-- /.box-body -->
              </div><!-- /.box -->

       
           <div class="box box-success" >
                <div class="box-header with-border">
                  <h3 class="box-title">GRAFICA 2</h3>
                </div>
                <div class="box-body chart-responsive">
                  <div class="chart" id="consumo_separado" style="height: 500px;"></div>
                </div><!-- /.box-body -->
              </div><!-- /.box -->
            
              <!-- Datos generales -->
              <div class="box box-success">
                <div class="box-header with-border">
                  <h3 class="box-title">Datos</h3>
          
                </div>
                <div class="box-body chart-responsive">
				<table id="tabla_datos" class="table table-bordered table-hover">
				    <thead>
                      <tr>
                        <th>Sensores</th>
						<th>Unidades</th>
                        <th>Total</th>
                        <th>Máximo</th>
                        <th>Minimo</th>
                        <th>Media</th>
					    <th>Desviación</th> 
					    <th>Cantidad</th> 
					    <th>Recopilados</th> 
					    <th>sin sensar</th> 
                      </tr>
                    </thead>
					</table>
                </div><!-- /.box-body -->
              </div><!-- /.box -->


			 </div><!-- /.col (LEFT) -->
			</div> <!--/fin row-->
        </section>
      </div><!-- /.content-wrapper -->

      <!-- Main Footer -->
      <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
         <center> <strong><a href="https://sites.google.com/site/grupotelecoudea/" target="_blank">Grupo de Investigación   en Telecomunicaciones Aplicadas <br> GITA </a></strong> </center>
        </div>
        <!-- Default to the left -->
 <div class="pull-left image">
              <img src="../../../dist/img/escudo.jpg" alt="Smiley face" height="50" width="43">
  </div>
<strong><a  href="http://www.udea.edu.co/wps/portal/udea/web/inicio/!ut/p/z1/04_Sj9CPykssy0xPLMnMz0vMAfIjo8ziLSydjQwdTQx8LAws3AwcA0N8XE1CfQ0M_E31wwkpiAJKG-AAjgZA_VFgJXATDLwNTYEmuAb4hfg7B7h4GUEV4DGjIDfCINNRUREATA0gew!!/dz/d5/L2dBISEvZ0FBIS9nQSEh/"target="_blank">Universidad de Antioquia</a><br>&emsp;Medellin-Antioquia<br></strong>

      </footer>

    
    </div><!-- ./wrapper -->

<!-- PHP BASE DE DATOS-->
    <!-- jQuery 2.1.4 -->
    <script src="../../../plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="../../../bootstrap/js/bootstrap.min.js"></script>
    <!-- Select2 -->
	<script src="../../../plugins/select2/i18n/es.js"></script>
    <script src="../../../plugins/select2/select2.full.min.js"></script>
	  
    <!-- date-range-picker -->
     <script src="../../../plugins/daterangepicker/moment.min.js"></script>
    <script src="../../../plugins/daterangepicker/daterangepicker.js"></script>

    <!-- iCheck 1.0.1 -->
    <!--<script src="../../../plugins/iCheck/icheck.min.js"></script>
    <!-- FastClick -->
    <script src="../../../plugins/fastclick/fastclick.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../../../dist/js/app.min.js"></script>


    <!-- Page script -->
	  
	  <!--morris, usado para las graficas con en puglins morris-->
      <script src="../../../plugins/morris/morris.min.js"></script>
	  <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
	 <!-- Graficas amcharts-->

        <script src="../../../plugins/amcharts/amcharts/amcharts.js" type="text/javascript"></script>
        <script src="../../../plugins/amcharts/amcharts/serial.js" type="text/javascript"></script> 
	    <script src="../../../plugins/amcharts/amcharts/xy.js" type="text/javascript"></script>
	    <script src="../../../plugins/json2xls/lib/json2xls.js"></script>
     <script>

	   
  $(function () {		
 //inicializa select2
  $.fn.select2.defaults.set('language', 'es');
	$(".select2").select2();

    $('#fecha').daterangepicker({ timePicker: true, timePickerIncrement: 15, format: 'YYYY-MM-DD HH:mm:ss ',timePicker12Hour: false,	
								});
//creacion y busqueda de sensores base de datos
	  
var sensores_tipo=$.post('../../../php/general/sensores/sensores_tipo.php',
function (data)
{
var option = document.createElement("option");
   option.text ='Ninguno';
   option.value ='0';
   document.getElementById("clase_sensor").appendChild(option); 	 
var resultado=eval(data);
for (i = 0; i < resultado.length; i++) {
var option = document.createElement("option");
   option.text = resultado[i]['descripcion'];
   option.value =resultado[i]['id'];
	/*
    var att = document.createAttribute("onclick");
    var actividad="sensores_del_tipo()";
	att.value = actividad;
   option.setAttributeNode(att);
   */
   document.getElementById("clase_sensor").appendChild(option); 
}
 });

 var analisis_tipo=$.post('../../../php/general/analisis/tipo_analisis.php',
function (data)
{
var option = document.createElement("option");
   option.text ='Ninguno';
   option.value ='[{"id":"0","tipo":"0"}]';
   document.getElementById("analisis").appendChild(option); 	 
var resultado=eval(data);
for (i = 0; i < resultado.length; i++) {
var option = document.createElement("option");
   option.text = resultado[i]['nombre'];
   option.value ='[{"id":"'+resultado[i]['id']+'","tipo":"'+resultado[i]['Tipo_analisis']+'"}]';

   document.getElementById("analisis").appendChild(option); 
}
 });
	
		  

		  

		  
  });
	  
	

    </script>
	 
	  
<!-- Zona de pruebas-->
			
<script type="text/javascript">
var primero=0;
 function actualizar()
{
$('#barras').empty();
var fecha=document.getElementById("fecha").value;
var sensores=$("#sensores").select2("val");
var informacion_analisis=$("#analisis").select2("val");
informacion_analisis=eval(informacion_analisis);
var analisis=informacion_analisis[0]['id'];
var tipo_analisis=informacion_analisis[0]['tipo'];
var dias=$("#dias").select2("val");
var TIPO=$("#clase_sensor").select2("val");
if(analisis=='0')
{
sin_analisis(fecha,sensores,analisis,dias,TIPO);
}
else
{
if(tipo_analisis==1)
{
predictivo_2_dimension_valor_tiempo(fecha,sensores,analisis,dias,TIPO);
}
}

};

</script>
<!-- bajar archivos en formato xls-->

<script type="text/javascript">
 function descargar()
  {
var fecha=document.getElementById("fecha").value;
var sensores=$("#sensores").select2("val");
var analisis=$("#analisis").select2("val");
var dias=$("#dias").select2("val");
var resultado;
var TIPO=$("#clase_sensor").select2("val");
  

   var datos=$.post('../../../php/dashboard/sensores/descarga.php',{ Fecha: fecha, Sensores:sensores,Analisis:analisis,Dias:dias,Tipo:TIPO},function (data)
  {
  
	   
	  JSONToCSVConvertor(data, "Consumo Gas", true);
   });
  };
</script>
<!-- funciones de libre uso-->
<script>

function JSONToCSVConvertor(JSONData, ReportTitle, ShowLabel) {
    //If JSONData is not an object then JSON.parse will parse the JSON string in an Object
    var arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;
    
    var CSV = '';   
    //Set Report title in first row or line
    
    CSV += ReportTitle + '\r\n\n';

    //This condition will generate the Label/Header
    if (ShowLabel) {
        var row = "";
        
        //This loop will extract the label from 1st index of on array
        for (var index in arrData[0]) {
            
            //Now convert each value to string and comma-seprated
            row += index + ',';
        }

        row = row.slice(0, -1);
        
        //append Label row with line break
        CSV += row + '\r\n';
    }
    
    //1st loop is to extract each row
    for (var i = 0; i < arrData.length; i++) {
        var row = "";
        
        //2nd loop will extract each column and convert it in string comma-seprated
        for (var index in arrData[i]) {
            row += '"' + arrData[i][index] + '",';
        }

        row.slice(0, row.length - 1);
        
        //add a line break after each row
        CSV += row + '\r\n';
    }

    if (CSV == '') {        
        alert("Invalid data");
        return;
    }   
    
    //Generate a file name
    var fileName = "MyReport_";
    //this will remove the blank-spaces from the title and replace it with an underscore
    fileName += ReportTitle.replace(/ /g,"_");   
    
    //Initialize file format you want csv or xls
    var uri = 'data:text/csv;charset=utf-8,' + escape(CSV);
    
    // Now the little tricky part.
    // you can use either>> window.open(uri);
    // but this will not work in some browsers
    // or you will not get the correct file extension    
    
    //this trick will generate a temp <a /> tag
    var link = document.createElement("a");    
    link.href = uri;
    
    //set the visibility hidden so it will not effect on your web-layout
    link.style = "visibility:hidden";
    link.download = fileName + ".csv";
    
    //this part will append the anchor tag and remove it after automatic click
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

	

 
}

function aleatorio(inferior,superior){
    numPosibilidades = superior - inferior
    aleat = Math.random() * numPosibilidades
    aleat = Math.floor(aleat)
    return parseInt(inferior) + aleat
} 
function color(){
	hexadecimal = new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F")
	color_aleatorio = "#";
	for (i=0;i<6;i++){
		pos = aleatorio(0,hexadecimal.length)
		color_aleatorio += hexadecimal[pos]
	}
	return color_aleatorio
} 

function sensores_del_tipo()
{
	

$("#sensores").select2("val", "");

var TIPO=$("#clase_sensor").select2("val");
$('#sensores').empty();
var sensores_tipo=$.post('../../../php/general/sensores/sensores.php',{Tipo:TIPO},function (data)
{

var resultado=eval(data);
for (i = 0; i < resultado.length; i++) {
var option = document.createElement("option");
   option.text = resultado[i]['descripcion'];
   option.value =resultado[i]['id'];
   document.getElementById("sensores").appendChild(option); 

}

		
}); //sensores tipo, peticion 
}
	
function sin_analisis(fecha,sensores,analisis,dias,TIPO)
	{
	var resultado;
var barra=$.post('../../../php/dashboard/sensores/graficas/barras_y_tablas.php',{ Fecha: fecha, Sensores:sensores,Analisis:analisis,Dias:dias,Tipo:TIPO},function (data)
{
resultado=eval(data);
$("#barras").empty();
 var bar = new Morris.Bar({
          element: 'barras',
          resize: false,
          data: resultado,
          xkey: ['descripcion'],
          ykeys: ['valor'],
          labels: ['Total(kw)'],
         barColors:['#45B549'],
          hideHover: 'false'
        });

var contador=0;

var tabla=document.createElement("tbody");
tabla.id="cuerpo_tabla";
document.getElementById("tabla_datos").appendChild(tabla); 
$("#cuerpo_tabla").empty();
var tama=resultado.length;
while(eval(contador)<eval(tama))
{

tabla=document.createElement("tr");
tabla.id="c"+contador+"";
document.getElementById("cuerpo_tabla").appendChild(tabla); 
//llenado
//descripcion
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['descripcion']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 	
//unidades
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['unidades']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//
//total
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['valor']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 	
//maximo
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['maximo']);
contenido.appendChild(texto);
contenido.value="maximo";
document.getElementById("c"+contador+"").appendChild(contenido); 
//minimo
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['minimo']);
contenido.appendChild(texto);
contenido.value="minimo";
document.getElementById("c"+contador+"").appendChild(contenido); 
//media
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['media']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//desviacion
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['desviacion']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//cantidad
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['cantidad']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//recopilados
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['recopilados']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//porcentaje
var contenido=document.createElement("td");
var porcentaje=(100-100*(resultado[contador]['recopilados']/resultado[contador]['cantidad'])).toPrecision(4);
var texto = document.createTextNode(porcentaje+"%");
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//fin
contador++;
}



}); 
var grafica_total=$.post('../../../php/dashboard/sensores/graficas/grafica_total.php',{ Fecha: fecha, Sensores:sensores,Analisis:analisis,Dias:dias,Tipo:TIPO},function (data)
{
var contador=0;
$("#consumo_total").empty();

resultado=eval(data);
            var chart;
            var chartCursor;

                // SERIAL CHART
                chart = new AmCharts.AmSerialChart();

                chart.dataProvider = resultado;
                chart.categoryField = "fecha";
       

                // AXES
                // category
                var categoryAxis = chart.categoryAxis;
                categoryAxis.parseDates = true;
                categoryAxis.minPeriod = "mm";
                //ategoryAxis.dashLength = 1;
                categoryAxis.dataDateFormat ="YYYY-MM-DD JJ:NN:SS";
                categoryAxis.axisColor = "#45B549";
	            categoryAxis.equalSpacing=true;

                // value
                var valueAxis = new AmCharts.ValueAxis();
                valueAxis.axisAlpha = 0;
                valueAxis.dashLength = 1;
                chart.addValueAxis(valueAxis);

                // GRAPH
                var graph = new AmCharts.AmGraph();
                graph.title = "green line";
                graph.valueField = "valor";
                graph.lineColor = "#45B549";
                chart.addGraph(graph);

                // CURSOR
                chartCursor = new AmCharts.ChartCursor();
                chartCursor.cursorPosition = "mouse";
	            chartCursor.categoryBalloonDateFormat = "JJ:NN, DD MMMM";
	            chartCursor.color="white";
	            chartCursor.cursorColor="#45B549";
                chart.addChartCursor(chartCursor);

                // SCROLLBAR
                var chartScrollbar = new AmCharts.ChartScrollbar();
	            chartScrollbar.gridColor="#45B549";
                chart.addChartScrollbar(chartScrollbar);
	     

                // WRITE
                chart.write("consumo_total");      
}); //fin grafica_total


var grafica_multiple=$.post('../../../php/dashboard/sensores/graficas/grafica_multiple.php',{ Fecha: fecha, Sensores:sensores,Analisis:analisis,Dias:dias,Tipo:TIPO},function (data)
  {

 var contador=0;
 var resultado=eval(data);
 $("#consumo_separado").empty();
var otro=data;
var contador=0;

//grafica consumo

            var chart;
            var chartCursor;

                // SERIAL CHART
                chart = new AmCharts.AmSerialChart();

                chart.dataProvider = resultado;
                chart.categoryField = "fecha";
                // listen for "dataUpdated" event (fired when chart is rendered) and call zoomChart method when it happens
                //chart.addListener("dataUpdated", zoomChart);

                // AXES
                // category
                var categoryAxis = chart.categoryAxis;
                categoryAxis.parseDates = true;
                categoryAxis.minPeriod = "mm";
                categoryAxis.dashLength = 1;
                categoryAxis.dataDateFormat ="YYYY-MM-DD JJ:NN:SS";
                categoryAxis.axisColor = "#45B549";
	            categoryAxis.equalSpacing=true;
	            //categoryAxis.parseDates = false;
 var colores;
 	   
	 while (resultado[0][contador])
  {   
	colores=color();

  var graficar=resultado[0][contador];


	

               eval("var axis"+contador+"= new AmCharts.ValueAxis()");
               eval("axis"+contador+".axisColor = colores");
               eval("axis"+contador+".axisThickness = 2");
	           
               chart.addValueAxis(eval("axis"+contador));
	 
	  if(eval(contador+1)%2==0)
	  {
		 var separacion=eval(50*(contador-1)/2);
	eval("axis"+contador+".offset = separacion");
	   eval("axis"+contador+".position = 'right'");
	  }
	  else
	  {
	var separacion=eval(50*contador/2);
	eval("axis"+contador+".offset = separacion");
	  }
		 
      eval("var graph"+contador+"= new AmCharts.AmGraph()");
               eval("graph"+contador+".valueAxis = eval('axis'+contador)"); // we have to indicate which value axis should be used
               eval("graph"+contador+".title = graficar");
		       eval("graph"+contador+".lineColor = colores");
               eval("graph"+contador+".valueField = graficar");
               chart.addGraph(eval("graph"+contador));
            
	
                 
	 contador++;
  }
	                 // CURSOR
                chartCursor = new AmCharts.ChartCursor();
                chartCursor.cursorPosition = "mouse";
	            chartCursor.categoryBalloonDateFormat = "JJ:NN, DD MMMM";
	            chartCursor.color="white";
	            chartCursor.cursorColor="#45B549";
                chart.addChartCursor(chartCursor);

                // SCROLLBAR
                var chartScrollbar = new AmCharts.ChartScrollbar();
	             chartScrollbar.gridColor="#45B549";
                chart.addChartScrollbar(chartScrollbar);
	     
               var legend = new AmCharts.AmLegend();
               legend.marginLeft = 110;
               legend.useGraphSettings = true;
               chart.addLegend(legend);
	   
	   
                // WRITE
                chart.write("consumo_separado");
        

   });
	}
function predictivo_2_dimension_valor_tiempo(fecha,sensores,analisis,dias,TIPO)
	{
	var resultado;
var barra=$.post('../../../php/dashboard/sensores/graficas/barras_y_tablas.php',{ Fecha: fecha, Sensores:sensores,Analisis:analisis,Dias:dias,Tipo:TIPO},function (data)
{

resultado=eval(data);
$("#barras").empty();
 var bar = new Morris.Bar({
          element: 'barras',
          resize: false,
          data: resultado,
          xkey: ['descripcion'],
          ykeys: ['promedio'],
          labels: ['Total(kw)'],
         barColors:['#45B549'],
          hideHover: 'false'
        });

var contador=0;

var tabla=document.createElement("tbody");
tabla.id="cuerpo_tabla";
document.getElementById("tabla_datos").appendChild(tabla); 
$("#cuerpo_tabla").empty();
var tama=resultado.length;
while(eval(contador)<eval(tama))
{

tabla=document.createElement("tr");
tabla.id="c"+contador+"";
document.getElementById("cuerpo_tabla").appendChild(tabla); 
//llenado
//descripcion
var contenido=document.createElement("td");

var texto = document.createTextNode(resultado[contador]['descripcion']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 	

//total
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['valor']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 	
//maximo
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['maximo']);
contenido.appendChild(texto);
contenido.value="maximo";
document.getElementById("c"+contador+"").appendChild(contenido); 
//minimo
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['minimo']);
contenido.appendChild(texto);
contenido.value="minimo";
document.getElementById("c"+contador+"").appendChild(contenido); 
//media
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['media']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//desviacion
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['desviacion']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//cantidad
var contenido=document.createElement("td");
var texto = document.createTextNode(resultado[contador]['cantidad']);
contenido.appendChild(texto);
document.getElementById("c"+contador+"").appendChild(contenido); 
//fin
contador++;
}



}); 
var grafica_total=$.post('../../../php/dashboard/sensores/graficas/grafica_total.php',{ Fecha: fecha, Sensores:sensores,Analisis:analisis,Dias:dias,Tipo:TIPO},function (data)
{


var contador=0;
$("#consumo_total").empty();


	   // alert(data);
        resultado=eval(data);
            var chart;
            var chartCursor;

	
            var chart;
            var chartCursor;

                // SERIAL CHART
                chart = new AmCharts.AmSerialChart();

                chart.dataProvider = resultado;
                chart.categoryField = "fecha";
       

                // AXES
                // category
                var categoryAxis = chart.categoryAxis;
                categoryAxis.parseDates = true;
                categoryAxis.minPeriod = "mm";
                //ategoryAxis.dashLength = 1;
                categoryAxis.dataDateFormat ="YYYY-MM-DD JJ:NN:SS";
                categoryAxis.axisColor = "#45B549";
	            categoryAxis.equalSpacing=true;

                // value
                var valueAxis = new AmCharts.ValueAxis();
                valueAxis.axisAlpha = 0;
                valueAxis.dashLength = 1;
                chart.addValueAxis(valueAxis);

                // GRAPH
                var graph = new AmCharts.AmGraph();
                graph.title = "Regresión";
                graph.valueField = "regresion";
                graph.lineColor = "red";
                chart.addGraph(graph);
	             
	                var graph1 = new AmCharts.AmGraph();
                graph1.title = "Reales";
                graph1.valueField = "valor";
                graph1.lineColor = "#45B549";
                chart.addGraph(graph1);
	           // first trend line
         
              
	
                // CURSOR
                chartCursor = new AmCharts.ChartCursor();
                chartCursor.cursorPosition = "mouse";
	            chartCursor.categoryBalloonDateFormat = "JJ:NN, DD MMMM";
	            chartCursor.color="white";
	            chartCursor.cursorColor="#45B549";
                chart.addChartCursor(chartCursor);

                // SCROLLBAR
                var chartScrollbar = new AmCharts.ChartScrollbar();
	            chartScrollbar.gridColor="#45B549";
                chart.addChartScrollbar(chartScrollbar);
	     

                // WRITE
                chart.write("consumo_total");

}); //fin grafica_total


var grafica_multiple=$.post('../../../php/dashboard/sensores/graficas/grafica_multiple.php',{ Fecha: fecha, Sensores:sensores,Analisis:analisis,Dias:dias,Tipo:TIPO},function (data)
  {
 var contador=0;
alert(data);
 var resultado=eval(data);
 $("#consumo_separado").empty();
        resultado=eval(data);
            var chart;
            var chartCursor;

	
            var chart;
            var chartCursor;

                // SERIAL CHART
                chart = new AmCharts.AmSerialChart();

                chart.dataProvider = resultado;
                chart.categoryField = "fecha";
       

                // AXES
                // category
                var categoryAxis = chart.categoryAxis;
                categoryAxis.parseDates = true;
                categoryAxis.minPeriod = "mm";
                //ategoryAxis.dashLength = 1;
                categoryAxis.dataDateFormat ="YYYY-MM-DD JJ:NN:SS";
                categoryAxis.axisColor = "#45B549";
	            categoryAxis.equalSpacing=true;

                // value
                var valueAxis = new AmCharts.ValueAxis();
                valueAxis.axisAlpha = 0;
                valueAxis.dashLength = 1;
                chart.addValueAxis(valueAxis);

                // GRAPH
                var graph = new AmCharts.AmGraph();
                graph.title = "Regresión";
                graph.valueField = "regresion";
                graph.lineColor = "red";
                chart.addGraph(graph);
	             
	                var graph1 = new AmCharts.AmGraph();
                graph1.title = "Reales";
                graph1.valueField = "valor";
                graph1.lineColor = "#45B549";
                chart.addGraph(graph1);
	           // first trend line
         
              
	
                // CURSOR
                chartCursor = new AmCharts.ChartCursor();
                chartCursor.cursorPosition = "mouse";
	            chartCursor.categoryBalloonDateFormat = "JJ:NN, DD MMMM";
	            chartCursor.color="white";
	            chartCursor.cursorColor="#45B549";
                chart.addChartCursor(chartCursor);

                // SCROLLBAR
                var chartScrollbar = new AmCharts.ChartScrollbar();
	            chartScrollbar.gridColor="#45B549";
                chart.addChartScrollbar(chartScrollbar);
	     

                // WRITE
     chart.write("consumo_separado");
        

   });
	}

	
</script>
	  
	  

<!-- Zona de pruebas-->

  </body>
</html>